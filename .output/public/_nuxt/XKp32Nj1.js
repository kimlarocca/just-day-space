import{_ as C}from"./3NSENS5s.js";import{u as M}from"./CpgKnvAJ.js";import{a as B}from"./BtaJPrrX.js";import{j as h,s as N,c as V,a as o,b as n,w as f,k as S,g as U,d as y,r,o as w}from"./BgijtkFZ.js";const j={class:"magic-link"},L={class:"flex align-items-end justify-content-between"},A=o("h1",{class:"mb-3"},"Magic Link",-1),E=o("h2",{class:"mb-2"},"Logging into your account...",-1),P=o("p",{class:"mb-4"},"Please wait a few moments.",-1),T=o("p",null,[o("a",{href:"/"},"Click here if you are not automatically logged in."),y(" Your magic link may have expired! ")],-1),H={__name:"magic-link",async setup(Y){var l,_,m,u,d,p;let e,s;const c=B(),i=M(),t=([e,s]=h(()=>i.auth.getUser()),e=await e,s(),e),a=([e,s]=h(()=>i.auth.getSession()),e=await e,s(),e);return(l=t==null?void 0:t.data)!=null&&l.user?c.value=(_=t==null?void 0:t.data)==null?void 0:_.user:(u=(m=a==null?void 0:a.data)==null?void 0:m.session)!=null&&u.user&&(c.value=(p=(d=a==null?void 0:a.data)==null?void 0:d.session)==null?void 0:p.user),N(()=>{c.value&&(window.location.href="/dashboard")}),(k,q)=>{const b=r("cuetip-logo"),v=C,g=r("divider"),x=r("Message");return w(),V("div",j,[o("header",L,[n(v,{to:"/",class:"plain"},{default:f(()=>[n(b)]),_:1})]),n(g,{class:"mb-6"}),A,E,n(g,{class:"my-6 w-2"}),k.errorMessage?(w(),S(x,{key:0,class:"mb-4",severity:"error"},{default:f(()=>[y(" Sorry, there was a problem logging in to your account. ")]),_:1})):U("",!0),P,T])}}};export{H as default};
