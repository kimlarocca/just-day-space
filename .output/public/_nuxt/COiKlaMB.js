import{E as h,v as U,G as v,n as w}from"./BgijtkFZ.js";import{u as y}from"./CpgKnvAJ.js";import{u as S}from"./BtaJPrrX.js";const P=h(async()=>{var i,n,l,c,f,d;let e,r;const u=U(),o=S(),s=y();let a=([e,r]=v(()=>s.auth.getUser()),e=await e,r(),e);const t=([e,r]=v(()=>s.auth.getSession()),e=await e,r(),e);s.auth.onAuthStateChange(async()=>{a=await s.auth.getUser()});const g=async()=>{const{data:m,error:p}=await s.from("profiles").select("*").eq("id",u.value.id).single();p?console.error(p):m&&(o.value=m)};if((i=a==null?void 0:a.data)!=null&&i.user?u.value=(n=a==null?void 0:a.data)==null?void 0:n.user:(c=(l=t==null?void 0:t.data)==null?void 0:l.session)!=null&&c.user&&(u.value=(d=(f=t==null?void 0:t.data)==null?void 0:f.session)==null?void 0:d.user),u.value)o.value||g();else return w("/")});export{P as default};
