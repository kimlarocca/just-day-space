import{u as V}from"./CuZozit4.js";import{g as c,r as n,o as m,c as P,u as r,k,w as T,d as x,t as B,f as C,a as d,b as u,i as p,m as I,n as M,l as S}from"./8BKww6Vf.js";const E={class:"mb-3"},N={class:"mb-3"},A={__name:"LoginWithEmail",emits:["closePanel"],setup(R,{emit:g}){const f=V(),w=S(),_=g,a=c(""),o=c(""),t=c(""),v=async()=>{var s,l;const e=await f.auth.signInWithPassword({email:a.value,password:o.value},{redirectTo:w.supabaseAuthSignInRedirectTo});e.error?(console.log(e),(l=(s=e==null?void 0:e.error)==null?void 0:s.message)!=null&&l.includes("Invalid login credentials")?t.value="The email and password combination you entered is incorrect. Please try again!":t.value=e):(_("closePanel"),M("/dashboard"))};return(e,s)=>{const l=n("Message"),b=n("InputText"),h=n("Password"),y=n("Button");return m(),P("div",null,[r(t)?(m(),k(l,{key:0,class:"mb-4",severity:"error"},{default:T(()=>[x(" Sorry, there was a problem logging in to your account: "+B(r(t)),1)]),_:1})):C("",!0),d("form",{onSubmit:I(v,["prevent"])},[d("div",E,[u(b,{id:"email",modelValue:r(a),"onUpdate:modelValue":s[0]||(s[0]=i=>p(a)?a.value=i:null),class:"w-full",type:"email",placeholder:"Email Address",required:""},null,8,["modelValue"])]),d("div",N,[u(h,{id:"password",toggleMask:"",feedback:!1,modelValue:r(o),"onUpdate:modelValue":s[1]||(s[1]=i=>p(o)?o.value=i:null),class:"w-full",type:"password",placeholder:"Password",required:""},null,8,["modelValue"])]),u(y,{label:"Login With Email & Password",class:"w-full",type:"submit"})],32)])}}};export{A as _};
