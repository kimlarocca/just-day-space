import{u as I}from"./CpgKnvAJ.js";import{h as n,r as i,o as r,c as M,f as a,k as u,w as m,d as g,t as d,g as p,a as s,b as f,i as V,l as x,m as B}from"./BgijtkFZ.js";const C={class:"mb-3"},T={class:"p-float-label inline"},E=s("label",{for:"magic-link-email"},"Email Address",-1),L={__name:"LoginWithMagicLink",props:{label:{type:String,default:"Sign In With Magic Link"}},setup(h){const _=I(),y=B(),t=n(""),o=n(""),l=n(""),b=async()=>{const{data:w,error:e}=await _.auth.signInWithOtp({email:t.value},{redirectTo:y.supabaseAuthSignInRedirectTo});e?(console.log(e),o.value=`Sorry, there was a problem logging with your magic link. Please try again! Error message: ${e}`):l.value="Success! If you have an account with that email address, you will get an email to with a magic link to login. If you created your account with Google, please log in with Google instead."};return(w,e)=>{const c=i("Message"),k=i("InputText"),v=i("Button");return r(),M("div",null,[a(o)?(r(),u(c,{key:0,class:"mb-4",severity:"error"},{default:m(()=>[g(" Sorry, there was a problem logging in to your account: "+d(a(o)),1)]),_:1})):p("",!0),a(l)?(r(),u(c,{key:1,class:"mb-4",severity:"success"},{default:m(()=>[g(d(a(l)),1)]),_:1})):p("",!0),s("form",{onSubmit:x(b,["prevent"]),class:"width400"},[s("div",C,[s("span",T,[f(k,{id:"magic-link-email",modelValue:a(t),"onUpdate:modelValue":e[0]||(e[0]=S=>V(t)?t.value=S:null),class:"w-full",type:"email",placeholder:"Email Address",required:""},null,8,["modelValue"]),E])]),f(v,{label:h.label,class:"w-full",type:"submit"},null,8,["label"])],32)])}}};export{L as _};
