{"version":3,"file":"LoginWithMagicLink-CmD0cXPU.js","sources":["../../../../components/supabase/LoginWithMagicLink.vue"],"sourcesContent":["<template>\n  <div>\n    <template v-if=\"errorMessage\">\n      <Message class=\"mb-4\" severity=\"error\">\n        Sorry, there was a problem logging in to your account:\n        {{ errorMessage }}\n      </Message>\n    </template>\n    <template v-if=\"successMessage\">\n      <Message class=\"mb-4\" severity=\"success\">\n        {{ successMessage }}\n      </Message>\n    </template>\n    <form @submit.prevent=\"login\" class=\"width400\">\n      <div class=\"mb-3\">\n        <span class=\"p-float-label inline\">\n          <InputText\n            id=\"magic-link-email\"\n            v-model=\"email\"\n            class=\"w-full\"\n            type=\"email\"\n            placeholder=\"Email Address\"\n            required\n          />\n          <label for=\"magic-link-email\">Email Address</label>\n        </span>\n      </div>\n      <Button :label=\"label\" class=\"w-full\" type=\"submit\" />\n    </form>\n  </div>\n</template>\n\n<script setup>\nconst client = useSupabaseClient()\nconst config = useRuntimeConfig()\n\nconst email = ref( '' )\nconst errorMessage = ref( '' )\nconst successMessage = ref( '' )\n\nconst props = defineProps( {\n  label: {\n    type: String,\n    default: 'Sign In With Magic Link',\n  },\n} )\n\nconst login = async () => {\n  const { data, error } = await client.auth.signInWithOtp(\n    {\n      email: email.value,\n    },\n    {\n      redirectTo: config.supabaseAuthSignInRedirectTo,\n    }\n  )\n  if ( error ) {\n    console.log( error )\n    errorMessage.value = `Sorry, there was a problem logging with your magic link. Please try again! Error message: ${ error }`\n  } else {\n    successMessage.value =\n      'Success! If you have an account with that email address, you will get an email to with a magic link to login. If you created your account with Google, please log in with Google instead.'\n  }\n}\n</script>\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAiCe,sBAAmB;AAGlC,UAAM,QAAQ,IAAK,EAAI;AACvB,UAAM,eAAe,IAAK,EAAI;AAC9B,UAAM,iBAAiB,IAAK,EAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}