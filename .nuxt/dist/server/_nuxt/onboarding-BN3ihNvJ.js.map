{"version":3,"file":"onboarding-BN3ihNvJ.js","sources":["../../../../pages/onboarding.vue"],"sourcesContent":["<template>\n  <div class=\"dashboard container p-4\">\n    <Html lang=\"en\">\n      <Head>\n        <Title>Just Day Space | Let's Get Started!</Title>\n      </Head>\n    </Html>\n    <h1 class=\"mb-4\">Let's Get Started!</h1>\n    <ProgressBar :value=\"progress\" class=\"mb-4\" />\n    <transition name=\"slide-fade\">\n      <div v-if=\"step === 0\">\n        <h2 class=\"mb-4\">First, tell us about yourself</h2>\n        <ManageUserProfile />\n        <Button\n          @click=\"step++\"\n          :disabled=\"!currentUserProfile?.birthday\"\n          class=\"mt-4\"\n          label=\"Continue\"\n        />\n      </div>\n    </transition>\n    <transition name=\"slide-fade\">\n      <div v-if=\"step === 1\">\n        <h2 class=\"mb-4\">Next, upload a profile picture</h2>\n        <SupabaseUploadImage\n          :image=\"currentUserProfile?.avatar_url || ''\"\n          @image-uploaded=\"hasProfilePic = true\"\n          class=\"mb-4\"\n        />\n        <Button @click=\"step--\" class=\"mr-4 p-button-outlined\" label=\"Back\" />\n        <Button\n          v-if=\"currentUserProfile?.avatar_url\"\n          @click=\"step++\"\n          label=\"Continue\"\n        />\n        <Button v-else @click=\"step++\" label=\"Skip\" />\n      </div>\n    </transition>\n    <transition name=\"slide-fade\">\n      <div v-if=\"step === 2\">\n        <h2 class=\"mb-4\">How did you hear about us?</h2>\n        <Dropdown\n          v-model=\"referredBy\"\n          :options=\"referrers\"\n          placeholder=\"Select an option\"\n          @change=\"updateProfile\"\n          class=\"mb-4\"\n        />\n        <Button @click=\"step--\" class=\"mr-4 p-button-outlined\" label=\"Back\" />\n        <Button v-if=\"referredBy\" @click=\"step++\" label=\"Continue\" />\n        <Button v-else @click=\"step++\" label=\"Skip\" />\n      </div>\n    </transition>\n    <transition name=\"slide-fade\">\n      <div v-if=\"step === 3\">\n        <h2 class=\"mb-4\">Thanks, you're all set up!</h2>\n        <p class=\"mb-4\">\n          You can always update your profile later in your account settings.\n        </p>\n        <nuxt-link to=\"/dashboard\" class=\"plain\">\n          <Button label=\"Add Your First Space\" icon=\"pi pi-plus\" />\n        </nuxt-link>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script setup>\ndefinePageMeta( {\n  middleware: 'auth',\n} )\n\nconst currentUser = useSupabaseUser()\nconst currentUserProfile = useCurrentUserProfile()\nconst supabase = useSupabaseClient()\n\nconst referredBy = ref( null )\nconst step = ref( 0 )\n\nconst referrers = [\n  'Google',\n  'Facebook',\n  'Instagram',\n  'Twitter',\n  'LinkedIn',\n  'Friend',\n  'Other',\n]\n\nconst progress = computed( () => {\n  if ( step.value === 0 ) return 0\n  else if ( step.value === 1 ) return 33\n  else if ( step.value === 2 ) return 66\n  return 100\n} )\n\nconst updateProfile = async () => {\n  const { error } = await supabase\n    .from( 'profiles' )\n    .upsert( {\n      id: currentUser.value.id,\n      updated_at: new Date().toISOString(),\n      referred_by: referredBy.value,\n    } )\n    .match( { id: currentUser.value.id } )\n  if ( error ) {\n    console.log( 'updateProfile error', error )\n  } else {\n    successMessage.value = true\n    currentUserProfile.value.referred_by = referredBy.value\n  }\n}\n</script>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA,UAAM,cAAc,gBAAiB;AACrC,UAAM,qBAAqB,sBAAuB;AAClD,UAAM,WAAW,kBAAmB;AAEpC,UAAM,aAAa,IAAK,IAAM;AAC9B,UAAM,OAAO,IAAK,CAAG;AAErB,UAAM,YAAY;AAAA,MAChB;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAEA,UAAM,WAAW,SAAU,MAAM;AAC/B,UAAK,KAAK,UAAU,EAAI,QAAO;AAAA,eACrB,KAAK,UAAU,EAAI,QAAO;AAAA,eAC1B,KAAK,UAAU,EAAI,QAAO;AACpC,aAAO;AAAA,IACT,CAAG;AAEH,UAAM,gBAAgB,YAAY;AAChC,YAAM,EAAE,MAAO,IAAG,MAAM,SACrB,KAAM,UAAY,EAClB,OAAQ;AAAA,QACP,IAAI,YAAY,MAAM;AAAA,QACtB,aAAY,oBAAI,KAAM,GAAC,YAAa;AAAA,QACpC,aAAa,WAAW;AAAA,MAC9B,CAAO,EACF,MAAO,EAAE,IAAI,YAAY,MAAM,GAAE,CAAI;AACxC,UAAK,OAAQ;AACX,gBAAQ,IAAK,uBAAuB,KAAO;AAAA,MAC/C,OAAS;AACL,uBAAe,QAAQ;AACvB,2BAAmB,MAAM,cAAc,WAAW;AAAA,MACnD;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}