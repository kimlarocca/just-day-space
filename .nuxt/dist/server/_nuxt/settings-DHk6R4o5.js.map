{"version":3,"file":"settings-DHk6R4o5.js","sources":["../../../../components/supabase/ResetPassword.vue","../../../../pages/settings.vue"],"sourcesContent":["<template>\n  <div>\n    <form class=\"password-reset\" @submit.prevent=\"resetPassword\">\n      <h4 class=\"mb-4\">Change Password</h4>\n      <p v-if=\"currentUser.app_metadata.provider !== 'email'\">\n        <em>\n          You are using your <strong>{{ currentUser.email }}</strong>\n          {{ currentUser.app_metadata.provider }} account to login. To change\n          your password, you must do so through your\n          {{ currentUser.app_metadata.provider }} account.\n        </em>\n      </p>\n      <div v-else class=\"width400\">\n        <div class=\"mb-4\" v-if=\"!successMessage\">\n          <Password\n            id=\"password\"\n            toggleMask\n            v-model=\"password\"\n            type=\"password\"\n            placeholder=\"New Password\"\n            required\n          />\n        </div>\n        <Button\n          v-if=\"!successMessage\"\n          :loading=\"pending\"\n          type=\"submit\"\n          class=\"full-width\"\n          label=\"Update Password\"\n        />\n      </div>\n      <template v-if=\"errorMessage\">\n        <Message\n          :sticky=\"false\"\n          :life=\"5000\"\n          class=\"mt-4\"\n          severity=\"error\"\n          @close=\"errorMessage = ''\"\n        >\n          Sorry, there was an error updating your password: {{ errorMessage }}\n        </Message>\n      </template>\n      <template v-if=\"successMessage\">\n        <Message\n          :sticky=\"true\"\n          :life=\"5000\"\n          class=\"mt-4\"\n          severity=\"success\"\n          @close=\"successMessage = ''\"\n        >\n          {{ successMessage }}\n        </Message>\n      </template>\n    </form>\n  </div>\n</template>\n\n<script setup>\nconst currentUser = useSupabaseUser()\nconst client = useSupabaseClient()\nconst errorMessage = ref( '' )\nconst password = ref( '' )\nconst pending = ref( false )\nconst successMessage = ref( null )\n\nconst resetPassword = async () => {\n  pending.value = true\n  const { error } = await client.auth.updateUser( {\n    email: currentUser.value.email,\n    password: password.value,\n  } )\n  pending.value = false\n  if ( error ) {\n    console.log( error )\n    if ( error.toString().includes( '8 characters' ) ) {\n      errorMessage.value = 'Password should be at least 8 characters.'\n    } else {\n      errorMessage.value = error\n    }\n  } else {\n    successMessage.value = 'Success! Your password has been updated.'\n  }\n}\n</script>\n","<template>\n  <div class=\"settings container p-4\">\n    <Html lang=\"en\">\n      <Head>\n        <Title>Just Day Space | Account Settings</Title>\n      </Head>\n    </Html>\n    <h1 class=\"mb-5\">Account Settings</h1>\n    <supabase-upload-image :image=\"avatarImage || ''\" class=\"mb-5\" />\n    <manage-user-profile />\n    <divider class=\"my-6 w-2\" />\n    <div id=\"password\">\n      <supabase-reset-password />\n    </div>\n    <divider class=\"my-6 w-2\" />\n    <div id=\"delete\">\n      <h4 class=\"mb-4\">Delete Account</h4>\n      <p>\n        Please <a href=\"mailto:help@justdayspace.com\">contact us</a> if you wish\n        to delete your account.\n      </p>\n    </div>\n    <div class=\"changes-saved-toast\">\n      <Message\n        v-if=\"successMessage\"\n        class=\"mb-4\"\n        severity=\"success\"\n        :closable=\"false\"\n        :sticky=\"false\"\n      >\n        Your changes have been saved.\n      </Message>\n    </div>\n  </div>\n</template>\n\n<script setup>\ndefinePageMeta( {\n  middleware: 'auth',\n} )\n\nconst currentUser = useSupabaseUser()\nconst supabase = useSupabaseClient()\n\nconst avatarImage = ref( null )\nconst profile = ref( [] )\nconst successMessage = ref( false )\nconst userType = ref( null )\n\n// get the profile for the logged in user\nlet { data } = await supabase\n  .from( 'profiles' )\n  .select( '*' )\n  .eq( 'id', currentUser.value?.id )\n  .limit( 1 )\nif ( data ) {\n  profile.value = data\n  avatarImage.value = data[ 0 ]?.avatar_url\n  userType.value = data[ 0 ]?.user_type\n}\n</script>\n\n<style lang=\"scss\">\n.settings {\n  position: relative;\n}\n.settings nav {\n  a,\n  a:visited,\n  a:active {\n    color: var(--gray);\n    font-weight: 500;\n    &.active,\n    &:hover {\n      color: var(--purple);\n    }\n  }\n}\n</style>\n"],"names":["_withAsyncContext","_a"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA,UAAM,cAAc,gBAAiB;AACtB,sBAAmB;AAClC,UAAM,eAAe,IAAK,EAAI;AAC9B,UAAM,WAAW,IAAK,EAAI;AAC1B,UAAM,UAAU,IAAK,KAAO;AAC5B,UAAM,iBAAiB,IAAK,IAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBlC,UAAM,cAAc,gBAAiB;AACrC,UAAM,WAAW,kBAAmB;AAEpC,UAAM,cAAc,IAAK,IAAM;AAC/B,UAAM,UAAU,IAAK,EAAI;AACzB,UAAM,iBAAiB,IAAK,KAAO;AACnC,UAAM,WAAW,IAAK,IAAM;AAG5B,QAAI,EAAE,KAAM,KAAG,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA;;AAAM,sBAClB,KAAM,UAAY,EAClB,OAAQ,GAAK,EACb,GAAI,OAAMC,MAAA,YAAY,UAAZ,gBAAAA,IAAmB,EAAI,EACjC,MAAO,CAAC;AAAA,KAAC;AACZ,QAAK,MAAO;AACV,cAAQ,QAAQ;AAChB,kBAAY,SAAQ,UAAM,CAAG,MAAT,mBAAW;AAC/B,eAAS,SAAQ,UAAM,CAAG,MAAT,mBAAW;AAAA,IAC9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}